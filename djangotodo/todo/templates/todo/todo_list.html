{% extends 'todo/base.html' %}

{% block header %}
<h1>Todo list</h1>
<p><a href="{% url 'create' %}">新規作成</a><p>
<a href="{% url 'logout_confirm' %}">ログアウト</a>
{% endblock header %}

{% block content %}
{% comment %} <div class="shadow-sm p-3 mb-5 bg-white rounded"> {% endcomment %}
<table class="table table-bordered">  
    <thead>
        <tr>
            <th scope="col">タイトル</th>
            <th scope="col">締め切り</th>
            <th scope="col">内容</th>
        </tr>
    </thead>
    <tbody>
        {% for task in tasks %}
    <tr>
        <td>{{task.title}}</td>
        <td>{{task.deadline}}</td>
        <td class="ellipsis">{{task.description}}</td>
        <td><a href="{% url 'detail' task.pk %}">詳細</a></td>
        <td><a href="{% url 'update' task.pk %}">編集</a></td>
        <td><a href="{% url 'delete' task.pk %}">削除</a></td>
    </tr>
    {% endfor %}
    
    </tbody>
</table>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const maxLength = 22; // 省略する文字数を設定
        const ellipsisElements = document.querySelectorAll('.ellipsis');

        ellipsisElements.forEach(function(element) {
            if (element.textContent.length > maxLength) {
                element.textContent = element.textContent.substring(0, maxLength) + '...';
            }
        });
    });
</script>
{% endblock content %}
